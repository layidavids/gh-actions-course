{% load static %} {% load static tailwind_tags %}
{% load i18n %}

<!DOCTYPE html>
<html id="html" lang="en">
  <head>
    <title>Cyph3r</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="icon" href="{% static 'icons/icon.png' %}" type="image/icon-x" />
    {% tailwind_css %}
    <script src="{% static 'js/htmx.min.js' %}" defer></script>
    <script src="{% static 'js/_hyperscript.min.js' %}" defer></script>
    <script>
      if (window.localStorage.getItem('theme') === 'dark') {
        document.querySelector('html').classList.add('dark');
      } else if (
          window.localStorage.getItem('theme') === 'light' || window.localStorage.getItem('theme') === null) {
          document.querySelector('html').classList.remove('dark');
      }
    </script>
  </head>
  <body id="body" class="relative min-h-screen">
    <main id="main" class="relative w-full min-h-screen bg-gradient-to-b from-orange-100 via-orange-50 to-white dark:bg-gradient-to-b dark:from-slate-600 dark:via-slate-700 dark:to-slate-800 text-gray-800">
      <header class="w-full pl-8 pr-8 absolute z-10 h-16 bg-orange-100 dark:bg-slate-600">
      <!-- Navigation Bar -->
        <nav class="flex justify-between w-full h-full items-center py-1 px-8">
        <!-- Logo -->
          <a href="{% url 'index' %}" rel="noopener" class="flex justify-start items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="35" height="35" x="0" y="0" viewBox="0 0 500 500" style="enable-background:new 0 0 512 512" xml:space="preserve" class="text-orange-600 dark:text-white "><g><path fill-rule="evenodd" d="M63.351 379.881h45.719c.474 0 .86-.386.86-.86v-32.14a4.733 4.733 0 0 1 4.733-4.733h40.636a4.734 4.734 0 0 1 4.733 4.733v37.732a4.733 4.733 0 0 1-4.733 4.733h-35.043a.861.861 0 0 0-.86.86v48.816a4.734 4.734 0 0 1-4.733 4.733H63.351a4.734 4.734 0 0 1-4.733-4.733v-54.408a4.734 4.734 0 0 1 4.733-4.733zm200.515-201.82v-27.962c0-32.974 26.979-59.953 59.953-59.953s59.953 26.979 59.953 59.953v27.962c0 .474.386.86.86.86h20.854c3.811 0 7.545.342 11.174.997a.832.832 0 0 0 .704-.186.832.832 0 0 0 .309-.66v-28.973c0-51.62-42.234-93.854-93.854-93.854s-93.854 42.234-93.854 93.854v27.962c0 .474.386.86.86.86h32.181c.473 0 .86-.386.86-.86zm177.043 28.508c-9.095-9.095-21.635-14.74-35.423-14.74H211.158a.861.861 0 0 0-.86.86v55.01c0 .474.386.86.86.86h34.192a6.455 6.455 0 0 1 6.454 6.454v64.104a6.455 6.455 0 0 1-6.454 6.454h-48.169a.861.861 0 0 0-.86.86v45.325c0 .474.386.86.86.86h34.334a6.455 6.455 0 0 1 6.454 6.454v52.639c0 .474.386.86.86.86h166.657c27.577 0 50.163-22.586 50.163-50.163V241.992c0-13.788-5.645-26.328-14.74-35.423zM289.23 275.304c0-19.103 15.486-34.588 34.588-34.588s34.588 15.486 34.588 34.588c0 13.091-7.274 24.481-18 30.355a.841.841 0 0 0-.447.754v65.371c0 4.007-3.278 7.285-7.285 7.285h-17.712c-4.007 0-7.285-3.278-7.285-7.285v-65.371c0-.323-.164-.6-.447-.754-10.725-5.874-18-17.264-18-30.355zm-240.146 7.302h36.894a4.734 4.734 0 0 1 4.733 4.733v36.894a4.734 4.734 0 0 1-4.733 4.733H49.084a4.733 4.733 0 0 1-4.733-4.733v-36.894a4.733 4.733 0 0 1 4.733-4.733zm67.136-55.94h64.565a4.733 4.733 0 0 1 4.733 4.732v64.565a4.734 4.734 0 0 1-4.733 4.733H116.22a4.734 4.734 0 0 1-4.733-4.733v-64.565a4.733 4.733 0 0 1 4.733-4.732zm-13.835-87.677h41.654a4.733 4.733 0 0 1 4.733 4.733v41.654a4.734 4.734 0 0 1-4.733 4.733h-41.654a4.733 4.733 0 0 1-4.733-4.733v-41.654a4.733 4.733 0 0 1 4.733-4.733z" clip-rule="evenodd" fill="currentColor" opacity="1" data-original="#000000"></path></g></svg>
            <div class="text-orange-600 dark:text-white font-semibold text-lgfont-sans">Cyph3r</div>
          </a>
          
          <!-- Settings -->
          <div class="relative rounded-full w-12 h-12 group hover:bg-orange-200 dark:hover:bg-slate-700 grid cursor-pointer" tabindex="0" _="on click from #main if event.target is not in me and #settings-menu does not match .hidden then add .hidden to #settings-menu then remove .blur-sm from #main else if event.target is in me and #settings-menu matches .hidden then remove .hidden from #settings-menu then add .blur-sm to #main else if event.target is in me and #settings-menu does not match .hidden then add .hidden to #settings-menu then remove .blur-sm from #main">
            <svg xmlns="http://www.w3.org/2000/svg" fill="None" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="30" height="30" class="text-black h-[30px] w-[30px] justify-self-center self-center dark:text-white">
              <path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 0 1 1.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.559.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.894.149c-.424.07-.764.383-.929.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 0 1-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.398.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 0 1-.12-1.45l.527-.737c.25-.35.272-.806.108-1.204-.165-.397-.506-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.108-1.204l-.526-.738a1.125 1.125 0 0 1 .12-1.45l.773-.773a1.125 1.125 0 0 1 1.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894Z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
            </svg>
            <div class="absolute justify-self-center mt-[52px] dark:bg-white bg-gray-500 shadow-sm ring-1 ring-gray-500 text-white rounded-md p-0.5 group-focus:hidden group-hover:block hidden text-xs dark:text-black">{% translate "settings" %}</div>
          </div>
        </nav> 
      </header>
    
      {% block content %} {% endblock %}
      <!-- Footer -->
      <footer class="w-full absolute bottom-0 h-16 bg-orange-100 dark:bg-slate-800">
        <div class="flex justify-center items-center h-full">
          <p class="text-slate-500 dark:text-slate-300 text-xs font-sans" _="on load js return new Date().getFullYear() end then put it into #year's innerHTML">Â© <span id="year"></span> Cyph3r. {% translate "This work is free to use, copy, and distribute without restriction." %}</p>
        </div>
      </footer>
    </main>
    <!-- Hidden Settings Menu -->
    <div id="settings-menu" class="w-1/6 rounded-md hidden flex-col gap-4 ring-1 ring-slate-900/5 min-w-48 min-h-52 max-h-48 max-w-52 shadow-xl absolute right-[30px] top-[60px] z-10 dark:bg-slate-700 bg-white">
      <div class="flex flex-row bg-slate-100 justify-around rounded-lg items-center m-4 p-0.5 gap-4">
        <svg id="lightmode" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="currentColor" class="w-8 h-8 text-slate-500 hover:text-orange-600 cursor-pointer" _="on click if #html matches .dark then call window.localStorage.setItem('theme', 'light') then remove .dark from #html then remove .text-blue-800 from #darkmode then add .text-slate-500 to #darkmode then remove .text-slate-500 from me then add .text-orange-600 to me">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" />
        </svg>
        <svg id="darkmode" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-slate-500 hover:text-blue-700 cursor-pointer" _="on click if #html does not match .dark then call window.localStorage.setItem('theme', 'dark') then add .dark to #html then remove .text-orange-600 from #lightmode then add .text-slate-500 to #lightmode then remove .text-slate-500 from me then add .text-blue-800 to me">
          <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z" />
        </svg>
      </div>
      <!-- Language Selector - Redirection -->
      <form action="{% url 'set_language' %}" method="post">
        {% csrf_token %}
        <input name="next" type="hidden" value="{{ request.path }}">
        <button id="english" type="submit" class="block text-center text-slate-500 dark:text-slate-300 hover:text-slate-900 hover:font-bold dark:hover:text-white font-sans m-4 p-1 gap-4 cursor-pointer" _="on click if #french matches .font-bold then remove .font-bold from #french then add .font-bold to me else add .font-bold to me" name="language" value="en">EN</button>
        <button id="french" type="submit" class="block text-center text-slate-500 dark:text-slate-300 hover:text-slate-900 hover:font-bold dark:hover:text-white font-sans m-4 p-1 gap-4 cursor-pointer"_="on click if #english matches .font-bold then remove .font-bold from #english then add .font-bold to me else add .font-bold to me" name="language" value="fr">FR</button>
      </form>
      <a href="https://cogecoinc.service-now.com/sp?id=sc_cat_item&sys_id=d6c0545547f7c1d0be3f04de536d43c2&sysparm_category=d1d615b31bcee510e1ecc992604bcbed" target="blank" rel="noopener" class="bg-slate-100 text-center block text-slate-500 hover:text-slate-900 font-sans font-semibold rounded-lg m-4 p-1 gap-4 cursor-pointer">{% translate "Support" %}</a>
    </div>

    <!-- Script to style light and dark mode icon depending on value of theme in localStorage -->
    <script type="text/hyperscript">
    def checkDarkTheme()
      if (window.localStorage.getItem('theme') == 'dark') 
        then remove .text-slate-500 from #darkmode then add .text-blue-800 to #darkmode
      else if (window.localStorage.getItem('theme') == 'light' or window.localStorage.getItem('theme') == null)
        then remove .text-slate-500 from #lightmode then add .text-orange-600 to #lightmode
    end

    on load call checkDarkTheme()
    </script>
  </body>
</html>
